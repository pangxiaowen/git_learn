## 协议

Git 可以使用四种不同的协议来传输数据：本地、HTTP、安全外壳 (SSH) 和 Git。这里我们将讨论它们是什么以及在哪些基本情况下您想要（或不想要）使用它们。

## 本地协议

最基本的是 _本地协议_，其中远程仓库位于同一主机上的另一个目录中。这通常用于您的团队中的每个人都可以访问共享文件系统，例如 NFS 挂载，或者不太可能的情况下，每个人都登录到同一台计算机。后者并不理想，因为您所有的代码仓库实例都将驻留在同一台计算机上，这使得灾难性损失的可能性大大增加。

如果您有共享的挂载文件系统，那么您可以克隆、推送到本地文件系统仓库并从中拉取更改。要克隆这样的仓库，或者将它作为远程仓库添加到现有项目中，请使用仓库的路径作为 URL。例如，要克隆本地仓库，您可以运行以下命令

git clone /srv/git/project.git

git clone file:///srv/git/project.git

如果您在 URL 的开头显式指定 `file://`，Git 的操作略有不同。如果您只指定路径，Git 会尝试使用硬链接或直接复制它需要的文件。如果您指定 `file://`，Git 会启动它通常用于通过网络传输数据的进程，这通常效率要低得多。指定 `file://` 前缀的主要原因是如果您想要仓库的干净副本，而没有无关的引用或对象（通常是在从其他 VCS 导入之后或类似情况，请参阅 Git 内部机制 获取维护任务）。我们将在此处使用正常路径，因为这样做几乎总是更快。

要将本地仓库添加到现有的 Git 项目中，您可以运行类似以下命令：

git remote add local_proj /srv/git/project.git

然后，您可以使用新的远程名称 local_proj 推送到该远程仓库并从该远程仓库拉取，就像您在网络上进行操作一样。


优点

基于文件的仓库的优点是简单，并且使用现有的文件权限和网络访问。如果您已经有整个团队都可以访问的共享文件系统，那么设置仓库非常容易。您只需将裸仓库副本放置在每个人都可以访问的共享位置，并像设置任何其他共享目录一样设置读写权限。我们将在 在服务器上安装 Git 中讨论如何导出裸仓库副本以用于此目的。

这也是快速获取他人工作仓库的一种不错选择。如果您和同事正在同一个项目上工作，而他们希望您查看某些内容，运行类似 git pull /home/john/project 的命令通常比他们推送到远程服务器，然后您再从远程服务器获取要容易得多。
缺点

这种方法的缺点是，从多个位置设置和访问共享访问通常比基本的网络访问更难。如果您想从家中的笔记本电脑推送，则必须挂载远程磁盘，这可能比基于网络的访问更困难和更慢。

重要的是要注意，如果您使用的是某种共享挂载，这并不一定是最快的方法。本地仓库只有在您能够快速访问数据时才是快速的。在 NFS 上的仓库通常比在同一服务器上通过 SSH 的仓库慢，因为 Git 允许在每个系统上的本地磁盘上运行。

最后，此协议无法保护仓库免受意外损坏。每个用户都拥有对“远程”目录的完全 shell 访问权限，没有任何东西可以阻止他们更改或删除内部 Git 文件并损坏仓库。

